<div class="modal-form">
  <h2>➕ Nuevo producto</h2>

  <form (ngSubmit)="guardarProducto()" enctype="multipart/form-data">
    <div class="form-grid">
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="producto.nombre" name="nombre" required />
      </div>

      <div class="form-group">
        <label>Precio</label>
        <input type="number" [(ngModel)]="producto.precio" name="precio" required />
      </div>

      <div class="form-group">
        <label>Stock</label>
        <input type="number" [(ngModel)]="producto.stock" name="stock" required />
      </div>

      <div class="form-group">
        <label>Stock mínimo</label>
        <input type="number" [(ngModel)]="producto.stockMinimo" name="stock_minimo" required />
      </div>

      <div class="form-group">
        <label>Stock máximo</label>
        <input type="number" [(ngModel)]="producto.stockMaximo" name="stock_maximo" required />
      </div>

      <div class="form-group">
        <label>Categoría</label>
        <select [(ngModel)]="producto.categoria" name="categoria_id" required>
          <option *ngFor="let c of categorias" [value]="c.id">{{ c.nombre }}</option>
        </select>
      </div>

      <div class="form-group">
        <label>Marca</label>
        <select [(ngModel)]="producto.marca" name="marca_id" required>
          <option *ngFor="let m of marcas" [value]="m.id">{{ m.nombre }}</option>
        </select>
      </div>
    </div>

    <div class="form-group-full">
      <label>Descripción</label>
      <textarea [(ngModel)]="producto.descripcion" name="descripcion" required></textarea>
    </div>

    <div class="imagenes">
      <label>Imágenes del producto</label>
      <div
        class="dropzone"
        (click)="abrirInput()"
        (drop)="onDrop($event)"
        (dragover)="onDragOver($event)"
      >
        Arrastra tus imágenes aquí o haz clic para seleccionar
        <input
          type="file"
          multiple
          (change)="onFileSelected($event)"
          style="display: none"
        />
      </div>

      <div class="imagenes-preview">
        <div class="imagen-box" *ngFor="let img of imagenPreviews; let i = index">
          <img [src]="img" />
          <button type="button" (click)="eliminarImagen(i)">×</button>
        </div>
      </div>
    </div>

    <div class="botones">
      <button type="submit">Guardar</button>
      <button type="button" (click)="volver()">Cancelar</button>
    </div>
  </form>
</div>
