<div class="modal-form">
  <h2>üñäÔ∏è Editar producto</h2>

  <form *ngIf="producto" (ngSubmit)="actualizarProducto()" enctype="multipart/form-data">

    <div class="form-grid">
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="producto.nombre" name="nombre" required />
      </div>

      <div class="form-group">
        <label>Precio</label>
        <input type="number" [(ngModel)]="producto.precio" name="precio" required />
      </div>

      <div class="form-group">
        <label>Stock</label>
        <input type="number" [(ngModel)]="producto.stock" name="stock" required />
      </div>

      <div class="form-group">
        <label>Stock m√≠nimo</label>
        <input type="number" [(ngModel)]="producto.stock_minimo" name="stock_minimo" required />
      </div>

      <div class="form-group">
        <label>Stock m√°ximo</label>
        <input type="number" [(ngModel)]="producto.stock_maximo" name="stock_maximo" required />
      </div>

      <div class="form-group">
        <label>Categor√≠a</label>
        <select [(ngModel)]="producto.categoria_id" name="categoria_id" required>
          <option *ngFor="let c of categorias" [value]="c.id">{{ c.nombre }}</option>
        </select>
      </div>

      <div class="form-group">
        <label>Marca</label>
        <select [(ngModel)]="producto.marca_id" name="marca_id" required>
          <option *ngFor="let m of marcas" [value]="m.id">{{ m.nombre }}</option>
        </select>
      </div>
    </div>

    <div class="form-group-full">
      <label>Descripci√≥n</label>
      <textarea [(ngModel)]="producto.descripcion" name="descripcion" required></textarea>
    </div>

    <div class="imagenes">
      <label>Im√°genes actuales del producto</label>
      <div class="imagenes-preview">
        <div class="imagen-box" *ngFor="let img of imagenesExistentes">
          <img [src]="img.url" alt="imagen producto" />  
          <button type="button" (click)="eliminarImagenExistente(img.id)">√ó</button>
        </div>
      </div>
      
      <label>Nuevas im√°genes</label>
      <div class="dropzone" (click)="abrirInput()" (drop)="onDrop($event)" (dragover)="onDragOver($event)">
        Arrastra tus im√°genes aqu√≠ o haz clic para seleccionar
        <input type="file" multiple (change)="onFileSelected($event)" style="display: none" />
      </div>

      <div class="imagenes-preview">
        <div class="imagen-box" *ngFor="let img of imagenPreviews; let i = index">
          <img [src]="img" alt="preview" />
          <button type="button" (click)="eliminarImagenNueva(i)">√ó</button>
        </div>
      </div>
    </div>

    <div class="botones">
      <button type="submit">Guardar</button>
      <button type="button" (click)="volver()">Cancelar</button>
    </div>
  </form>
</div>
